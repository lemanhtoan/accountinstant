<?xml version="1.0"?>
<config>
	<modules>
		<Magestore_Onestepcheckout>
			<version>2.0.1</version>
		</Magestore_Onestepcheckout>
	</modules>
	<frontend>
		<secure_url>
            <onestepcheckout>/onestepcheckout/</onestepcheckout>
        </secure_url>
		<routers>
			<onestepcheckout>
				<use>standard</use>
				<args>
					<module>Magestore_Onestepcheckout</module>
					<frontName>onestepcheckout</frontName>
				</args>
			</onestepcheckout>
		</routers>
		<translate>
			<modules>
				<Magestore_Onestepcheckout>
					 <files>
							<default>Magestore_Onestepcheckout.csv</default>
					 </files>
				</Magestore_Onestepcheckout>
			</modules>
		</translate>
		<layout>
			<updates>
				<onestepcheckout>
					<file>onestepcheckout.xml</file>
				</onestepcheckout>
			</updates>
		</layout>
		
		<events>
			<controller_action_predispatch_catalog_product_view>
				<observers>
					<onestepcheckout_observers>
						<type>singleton</type>
        				<class>onestepcheckout/cart</class>
        				<method>catalogProductView</method>
					</onestepcheckout_observers>
				</observers>
			</controller_action_predispatch_catalog_product_view>
			<controller_action_predispatch_checkout_cart_add>
				<observers>
					<onestepcheckout_observers>
						<type>singleton</type>
        				<class>onestepcheckout/cart</class>
        				<method>checkoutCartAdd</method>
					</onestepcheckout_observers>
				</observers>
			</controller_action_predispatch_checkout_cart_add>
			<controller_action_predispatch_checkout_cart_delete>
				<observers>
					<onestepcheckout_observers>
						<type>singleton</type>
        				<class>onestepcheckout/cart</class>
        				<method>checkoutCartDelete</method>
					</onestepcheckout_observers>
				</observers>
			</controller_action_predispatch_checkout_cart_delete>
			<controller_action_predispatch_checkout_cart_configure>
				<observers>
					<onestepcheckout_observers>
						<type>singleton</type>
        				<class>onestepcheckout/cart</class>
        				<method>checkoutCartConfigure</method>
					</onestepcheckout_observers>
				</observers>
			</controller_action_predispatch_checkout_cart_configure>
			<controller_action_predispatch_checkout_cart_updateItemOptions>
				<observers>
					<onestepcheckout_observers>
						<type>singleton</type>
        				<class>onestepcheckout/cart</class>
        				<method>checkoutCartUpdateItemOptions</method>
					</onestepcheckout_observers>
				</observers>
			</controller_action_predispatch_checkout_cart_updateItemOptions>
			<controller_action_predispatch_checkout_cart_index>
				<observers>
					<onestepcheckout_observers>
						<type>singleton</type>
        				<class>onestepcheckout/cart</class>
        				<method>checkoutCartIndex</method>
					</onestepcheckout_observers>
				</observers>
			</controller_action_predispatch_checkout_cart_index>
			<controller_action_predispatch_onestepcheckout_admin_cart>
				<observers>
					<onestepcheckout_observers>
						<type>singleton</type>
        				<class>onestepcheckout/cart</class>
        				<method>checkoutCartIndex</method>
					</onestepcheckout_observers>
				</observers>
			</controller_action_predispatch_onestepcheckout_admin_cart>
			<controller_action_predispatch_checkout_cart_updatePost>
				<observers>
					<onestepcheckout_observers>
						<type>singleton</type>
        				<class>onestepcheckout/cart</class>
        				<method>checkoutCartUpdatePost</method>
					</onestepcheckout_observers>
				</observers>
			</controller_action_predispatch_checkout_cart_updatePost>
			<controller_action_predispatch_checkout_cart_estimateUpdatePost>
				<observers>
					<onestepcheckout_observers>
						<type>singleton</type>
        				<class>onestepcheckout/cart</class>
        				<method>checkoutCartEstimateUpdatePost</method>
					</onestepcheckout_observers>
				</observers>
			</controller_action_predispatch_checkout_cart_estimateUpdatePost>
			<controller_action_predispatch_checkout_cart_couponPost>
				<observers>
					<onestepcheckout_observers>
						<type>singleton</type>
        				<class>onestepcheckout/cart</class>
        				<method>checkoutCartCouponPost</method>
					</onestepcheckout_observers>
				</observers>
			</controller_action_predispatch_checkout_cart_couponPost>
			<controller_action_predispatch_checkout_cart_estimatePost>
				<observers>
					<onestepcheckout_observers>
						<type>singleton</type>
        				<class>onestepcheckout/cart</class>
        				<method>checkoutCartEstimatePost</method>
					</onestepcheckout_observers>
				</observers>
			</controller_action_predispatch_checkout_cart_estimatePost>
			
			<!-- Onestepcheckout admin skip active payment method-->
			<payment_method_is_active>
				<observers>
					<onestepcheckout_admin>
						<type>singleton</type>
        				<class>onestepcheckout/admin</class>
        				<method>skipPaymentMethod</method>
					</onestepcheckout_admin>
				</observers>
			</payment_method_is_active>
		</events>
		
		
		<events>
			<sales_order_place_after>
				<observers>
					<magestore_onestepcheckout_observer>
						<type>singleton</type>
						<class>onestepcheckout/observer</class>
						<method>orderPlaceAfter</method>
					</magestore_onestepcheckout_observer>
				</observers>
			</sales_order_place_after>
			<paypal_prepare_line_items>
				<observers>
					<magestore_onstepcheckout_paypal_prepare_line_items>
						<type>singleton</type>
						<class>onestepcheckout/giftwrap</class>
						<method>paypal_prepare_line_items</method>
					</magestore_onstepcheckout_paypal_prepare_line_items>
				</observers>
			</paypal_prepare_line_items>
		</events>
	</frontend>
	<admin>
		<routers>
			<onestepcheckoutadmin>
				<use>admin</use>
				<args>
					<module>Magestore_Onestepcheckout</module>
					<frontName>onestepcheckoutadmin</frontName>
				</args>
			</onestepcheckoutadmin>
		</routers>
	</admin>
	<adminhtml>
		<layout>
			<updates>
				<onestepcheckout>
					<file>onestepcheckout.xml</file>
				</onestepcheckout>
			</updates>
		</layout>
		<events>
			<controller_action_predispatch_adminhtml>
				<observers>
					<magestore_onestepcheckout_observer>
						<type>singleton</type>
						<class>onestepcheckout/observer</class>
						<method>controller_action_predispatch_adminhtml</method>
					</magestore_onestepcheckout_observer>
				</observers>
			</controller_action_predispatch_adminhtml>	
			<controller_action_predispatch>
				<observers>
					<magestore_onestepcheckout_observer>
						<type>singleton</type>
						<class>onestepcheckout/observer</class>
						<method>controller_action_predispatch</method>
					</magestore_onestepcheckout_observer>
				</observers>
			</controller_action_predispatch>		
		</events>
		<blocks>
			<adminhtml>
				<rewrite>
					<system_config_edit>Magestore_Onestepcheckout_Block_Adminhtml_Config_Edit</system_config_edit>
				</rewrite>
			</adminhtml>
		</blocks>
	</adminhtml>
	<global>
		<!-- onestepcheckout admin -->
		<events>
			<controller_action_predispatch_adminhtml_index_logout>
				<observers>
					<onestepcheckout_observers>
						<type>singleton</type>
        				<class>onestepcheckout/cart</class>
        				<method>adminlogout</method>
					</onestepcheckout_observers>
				</observers>
			</controller_action_predispatch_adminhtml_index_logout>
			<controller_action_predispatch_adminhtml_index_login>
				<observers>
					<onestepcheckout_observers>
						<type>singleton</type>
        				<class>onestepcheckout/cart</class>
        				<method>adminlogin</method>
					</onestepcheckout_observers>
				</observers>
			</controller_action_predispatch_adminhtml_index_login>
			<sales_order_save_after>
        		<observers>
					<sales_order_save_after>
						<type>singleton</type>
						<class>onestepcheckout/observer</class>
						<method>sales_order_save_after</method>
					</sales_order_save_after>
				</observers>
        	</sales_order_save_after>
		</events>
		<routers>
			<sagepaysuite>
				<rewrite>
					<payment>
						<to>onestepcheckout/payment</to>
						<override_actions>true</override_actions>
						<actions>
							<onepageSaveOrder>
								<to>onestepcheckout/payment/onepageSaveOrder</to>
							</onepageSaveOrder>
						</actions>
					</payment>
				</rewrite>
			</sagepaysuite>
		</routers>
		<models>
			<onestepcheckout>
				<class>Magestore_Onestepcheckout_Model</class>
				<resourceModel>onestepcheckout_mysql4</resourceModel>
			</onestepcheckout>
			<onestepcheckout_mysql4>
				<class>Magestore_Onestepcheckout_Model_Mysql4</class>
				<entities>
					<onestepcheckout>
						<table>onestepcheckout</table>
					</onestepcheckout>
					<survey>
						<table>onestepcheckout_survey</table>
					</survey>
					<geoip>
						<table>geoip</table>
					</geoip>
					<country>
						<table>geoip_country</table>
					</country>
					<countrylist>
						<table>geoip_countrylist</table>
					</countrylist>					
					<admin>
						<table>onestepcheckout_admin</table>
					</admin>
				</entities>
			</onestepcheckout_mysql4>
			<customer>
				<rewrite>
					<form>Magestore_Onestepcheckout_Model_Customer_Form</form>
				</rewrite>
			</customer>
		</models>
		<resources>
			<onestepcheckout_setup>
				<setup>
					<module>Magestore_Onestepcheckout</module>
				</setup>
				<connection>
					<use>core_setup</use>
				</connection>
			</onestepcheckout_setup>
			<onestepcheckout_write>
				<connection>
					<use>core_write</use>
				</connection>
			</onestepcheckout_write>
			<onestepcheckout_read>
				<connection>
					<use>core_read</use>
				</connection>
			</onestepcheckout_read>
		</resources>
		<blocks>
			<onestepcheckout>
					<class>Magestore_Onestepcheckout_Block</class>
			</onestepcheckout>
			<adminhtml>
				<rewrite>
					<system_config_edit>Magestore_Onestepcheckout_Block_Adminhtml_Config_Edit</system_config_edit>
				</rewrite>
			</adminhtml>
		</blocks>
		<helpers>
			<onestepcheckout>
				<class>Magestore_Onestepcheckout_Helper</class>
			</onestepcheckout>
		</helpers>
		<events>
			<controller_action_predispatch_checkout_onepage_index>
				<observers>
					<magestore_onestepcheckout_observer>
						<type>singleton</type>
						<class>onestepcheckout/observer</class>
						<method>initController</method>
					</magestore_onestepcheckout_observer>
				</observers>
			</controller_action_predispatch_checkout_onepage_index>
			<checkout_type_onepage_save_order>
				<observers>
					<magestore_onestepcheckout_observer>
						<type>model</type>
						<class>Magestore_Onestepcheckout_Helper_Data</class>
						<method>saveOrderComment</method>
					</magestore_onestepcheckout_observer>
				</observers>
			</checkout_type_onepage_save_order>
			<checkout_type_onepage_save_order_after>
				<observers>
					<magestore_onestepcheckout_observer>
						<type>singleton</type>
						<class>onestepcheckout/observer</class>
						<method>notifyAdmin</method>
					</magestore_onestepcheckout_observer>
				</observers>
			</checkout_type_onepage_save_order_after>			
		</events>
		<template>
			<email>
				<onestepcheckout_order_notification_template translate="label" module="onestepcheckout">
					<label>New Order Notification</label>
					<file>sales/new_order_notification.html</file>
					<type>html</type>
				</onestepcheckout_order_notification_template>
			</email>
		</template>
        <sales>
			<quote>
				<totals>
					<giftwrap>
						<class>onestepcheckout/sales_quote_address_total_giftwrap</class>
						<after>wee,discount,tax,tax_subtotal,grand_total</after>
					</giftwrap>					
					<!--Onstepcheckout admin discount-->
					<onestepcheckoutdiscount>
						<class>onestepcheckout/sales_quote_address_total_discount</class>
						<after>wee,discount,tax,tax_subtotal,grand_total</after>
					</onestepcheckoutdiscount>					
				</totals>
			</quote>
			<order_invoice>
				<totals>
					<giftwrap>
						<class>onestepcheckout/sales_order_invoice_total_giftwrap</class>
					</giftwrap>
					<!--Onstepcheckout admin discount-->
					<onestepcheckoutdiscount>
						<class>onestepcheckout/sales_order_invoice_total_discount</class>
					</onestepcheckoutdiscount>
				</totals>
			</order_invoice>
			<order_creditmemo>
				<totals>
					<giftwrap>
						<class>onestepcheckout/sales_order_invoice_total_giftwrap</class>
					</giftwrap>
					<!--Onstepcheckout admin discount-->
					<onestepcheckoutdiscount>
						<class>onestepcheckout/sales_order_invoice_total_discount</class>
					</onestepcheckoutdiscount>
				</totals>
			</order_creditmemo>
		</sales>
		<fieldsets>
            <sales_convert_quote_address>
                <onestepcheckout_giftwrap_amount>
                    <to_order>*</to_order>
                </onestepcheckout_giftwrap_amount>
				<!--Onstepcheckout admin discount-->
				<onestepcheckout_discount_amount>
                    <to_order>*</to_order>
                </onestepcheckout_discount_amount>                
            </sales_convert_quote_address>
        </fieldsets>
		<pdf>
			<totals>
				<giftwrap translate="title">
					<title>Giftwrap</title>
					<source_field>giftwrap_amount</source_field>
					<model>onestepcheckout/order_pdf_amount</model>
					<font_size>7</font_size>
					<display_zero>0</display_zero>
					<sort_order>450</sort_order>
				</giftwrap>
			</totals>			
		</pdf>
	</global>
	<default>
		<onestepcheckout>
			<general>
				<active>1</active>
				<show_shipping_address>1</show_shipping_address>
				<country_id>US</country_id>
				<postcode>90034</postcode>				
				<region_id>12</region_id>
				<use_for_disabled_fields>1</use_for_disabled_fields>
				<checkout_title>One step checkout</checkout_title>
				<checkout_description>Please fill in the fields below and click Place order to complete your purchase!</checkout_description>
				<page_layout>3columns</page_layout>
			</general>
			<field_management>
				<show_city>1</show_city>
				<show_zipcode>1</show_zipcode>
				<show_company>0</show_company>
				<show_fax>0</show_fax>
				<show_telephone>1</show_telephone>
				<show_region>1</show_region>
				<show_comment>0</show_comment>
				<show_newsletter>0</show_newsletter>
				<show_discount>0</show_discount>
				<enable_giftmessage>0</enable_giftmessage>
			</field_management>
			<field_position_management>
				<position>test</position>
				<row_0>firstname</row_0>
				<row_1>lastname</row_1>
				<row_2>email</row_2>
				<row_3>telephone</row_3>
				<row_4>street</row_4>
				<row_5>0</row_5>
				<row_6>country</row_6>
				<row_7>0</row_7>
				<row_8>city</row_8>
				<row_9>0</row_9>
				<row_10>postcode</row_10>
				<row_11>region</row_11>
				<row_12>company</row_12>
				<row_13>fax</row_13>
				<row_14>0</row_14>
			</field_position_management>
			<field_require_management>
				<firstname>1</firstname>
				<lastname>1</lastname>
				<email>1</email>
				<company>0</company>
				<street>1</street>
				<country>1</country>
				<region>0</region>
				<city>1</city>
				<postcode>1</postcode>
				<telephone>1</telephone>
				<fax>0</fax>
				
			</field_require_management>
			<checkout_mode>
				<show_login_link>1</show_login_link>
				<enable_registration>1</enable_registration>
				<allow_guest>1</allow_guest>
				<login_link_title>Already have an account? Click here to login</login_link_title>
			</checkout_mode>
			<ajax_update>
				<enable_ajax>1</enable_ajax>
				<ajax_fields>country,postcode,state/region,city</ajax_fields>
				<update_payment>1</update_payment>
				<reload_payment>1</reload_payment>
			</ajax_update>
			<terms_conditions>
				<enable_terms>0</enable_terms>
				<term_width>400</term_width>
				<term_height>250</term_height>
			</terms_conditions>
			<order_notification>
				<enable_notification>0</enable_notification>
				<template>onestepcheckout_order_notification_template</template>
			</order_notification>
			<geoip>
				<postcode_characters>3</postcode_characters>
				<city_characters>3</city_characters>
				<rows>100</rows>
			</geoip>
			<admin>
				<rows>7</rows>
			</admin>
			<!-- onestepcheckout admin -->
			<product>
				<bundle>onestepcheckout/product_bundle</bundle>
				<giftvoucher>onestepcheckout/product_giftvoucher</giftvoucher>
				<grouped>onestepcheckout/product_grouped</grouped>
				<configurable>onestepcheckout/product_configurable</configurable>
				<minicart>0</minicart>
			</product>
		</onestepcheckout>
	</default>
	<!--  <websites>
	  <admin>
	   <dev>
		<debug>
		 <template_hints>1</template_hints>
		 <template_hints_blocks>1</template_hints_blocks>
		</debug>
	   </dev>
	  </admin>
	 </websites>  -->
</config>